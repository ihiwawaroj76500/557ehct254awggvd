var PlayerWidgetCommonMethods=function(){"use strict";var i=!1;return{pingVCS:function(t){t&&setTimeout(function(){var e;i||(i=!0,(e=new XMLHttpRequest).open("GET",t),e.send())},5e3)},getKeys:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i},prettyTime:function(e){var t=parseInt(e,10),i=Math.floor(t/3600),r=Math.floor((t-3600*i)/60),o=t-3600*i-60*r;return i<10&&(i="0"+i),r<10&&(r="0"+r),o<10&&(o="0"+o),(0<parseInt(i)?i+":":"")+r+":"+o}}}(),VueVideoCustomElement=function(){"use strict";return{initializePlayer:function(){var e,t;"undefined"!=typeof playerScriptUrl&&(e=document.createElement("script"),(t=document.getElementById("videoPlayerPlaceholder"))&&(t.style.display="block"),document.head.appendChild(e),e.onload=function(){Vue.customElement("video-element",{props:["platform","uniqueId","dataAttributes"],data:function(){return{premiumFlag:"undefined"!=typeof premiumFlag&&premiumFlag,videoPlaceholder:document.getElementById("videoPlayerPlaceholder"),urlParams:this.getUrlVars(),hasPingedVcServer:!1,isVideo3x4:!1,isPrerollPlaying:!1,prePlayerInitTime:null,isPlaylist:"undefined"!=typeof VIDEO_SHOW&&Array.isArray(VIDEO_SHOW.buildPlaylistItems),ccExperimentValue:"",ccExperimentEnabled:!1,isPurchaseFlowOpen:!1,playerConfig:null,problemStatusResent:!1}},methods:{getUrlVars:function(){var r={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,i){r[t]=i});return r},chargePbBlock:function(){var e=document.getElementById("pb_template");e&&document.querySelector(".mhp1138_container").appendChild(e)},togglePlayerSizeHD:function(){/chrome\/([6][9])\./.test(navigator.userAgent.toLowerCase())&&setTimeout(function(){page_params.chrome_69_bandaid={iframes:[]},$j("iframe").each(function(){page_params.chrome_69_bandaid.iframes.push({element:$j(this),h:$j(this).height()})});for(var e=0;e<page_params.chrome_69_bandaid.iframes.length;e++){var t=page_params.chrome_69_bandaid.iframes[e];t.element.height(t.h+1),t.element.height(),t.element.height(t.h)}},300);var e=document.querySelector(".mainPlayerDiv"),t=document.querySelector(".playerFlvContainer"),i=document.querySelector(".js-underplayerAd"),r=document.querySelector(".js-relatedVideos"),o=document.querySelector(".js-recommendedVideos"),a=document.querySelector(".js-commentReplacement"),n=document.getElementById("under-player-playlists"),l=document.querySelector(".section-relateds"),s=document.querySelector(".section-p2v"),d=document.getElementById("hd-leftColVideoPage"),u=document.querySelector(".nextVideoSection"),c=document.getElementById("hd-rightColVideoPage"),p=c||d.parentNode.children[1],m=(m=[e,t,i,r,o,a,n,p,s,l,document.querySelector(".show-more-btn"),u]).filter(function(e){return null!=e});MG_Utils.hasClass(e,"original")?(MG_Utils.addClassMultiple(m,"wide"),MG_Utils.removeClassMultiple(m,"original")):(MG_Utils.addClassMultiple(m,"original"),MG_Utils.removeClassMultiple(m,"wide")),p&&MG_Utils.hasClass(p,"videoSize3x4")&&(p&&MG_Utils.hasClass(p,"wide")?this.resizeVerticalVideo():p.style.marginTop="0px"),p&&VIDEO_SHOW.isTrailerVideo&&VIDEO_SHOW.canShowAds&&VIDEO_SHOW.trailerGating&&MG_Utils.addClass(p,"trailerVideoAd")},resizeVerticalVideo:function(){var e,t,i,r=document.querySelector(".mainPlayerDiv"),o=document.getElementById("hd-leftColVideoPage"),a=document.getElementById("hd-rightColVideoPage"),n=a||o.parentNode.children[1],l=r?r.querySelector("video"):null,s=window.innerHeight-200,d=o&&o.querySelector(".js-underplayerAd"),u=d?d.offsetHeight+20:0;l&&n&&(r.classList.add("videoSize3x4"),n.classList.add("videoSize3x4"),(e=l.videoWidth>l.videoHeight?l.videoWidth/l.videoHeight:l.videoHeight/l.videoWidth)&&(i=s<(t=540*e)?s+u:t,r.style.width="540px",r.style.height=t+"px",r.style.maxHeight=s+"px",MG_Utils.hasClass(n,"wide")&&(n.style.marginTop=i+"px")))},destroyPlayer:function(t){MG_Utils.addEventHandler(window,"beforeunload",function(e){MHP1138.destroyPlayer(t)})},disablePopOnControls:function(){var e=document.querySelector(".mhp1138_controlBar"),t=document.querySelector(".mhp1138_sound");e&&t&&(MG_Utils.addClass(e,"js-pop"),MG_Utils.addClass(t,"js-pop"))},triggerFullScreenDisplay:function(e){var t=document.getElementById(e);t&&MG_Utils.addClass(t,"fullscreen")},getUpsellFlag:function(e){return this.isVrVideo?e&&!this.isPremium?[2160]:[]:e?[1080]:[]},getUpsellLinkcode:function(e){return!!e&&"Player"+e+"pUpsell"},isAdBlockOn:function(){return"desktop"==this.platform&&void 0!==page_params.holiday_promo||"desktop"!=this.platform},showPreroll:function(e){return void 0!==e&&this.isAdBlockOn()&&!this.isVrVideo},nextVideoBtnConfig:function(e){if(0===Object.keys(e).length)return{};var t={thumb:e.thumb,video:e.video,duration:e.duration,title:e.title,isHD:e.isHD,nextUrl:e.nextUrl};return"mobile"!=this.platform||this.isPlaylist||(t.mobile=!0,t.chanel=e.channelTitle||"",t.timeout=5,this.autoNextEnabled=!0),e.isJoinPageEntry&&"undefined"!=typeof VIDEO_SHOW&&MG_Utils.ajaxCall({type:"GET",url:VIDEO_SHOW.getBuildJoinPageUrl,data:{entry_code:"VidPg-premVid-default",segment:VIDEO_SHOW.segment,viewkey:e.vkey},dataType:"json",success:function(e){"PASS"==e.success&&e.url&&(t.nextUrl=e.url)}}),t},buildPrerollObj:function(e){var i,r=[];return[].forEach.call(e.campaigns,function(e){var t={};e.clickableAreasByPlatform&&(t=e.clickableAreasByPlatform.pc?e.clickableAreasByPlatform.pc:{video:!0,link:!0}),i={xml:e.vastXml,vastSkipDelay:!1,rollSettings:{onNth:e.on_nth,skipDelay:e.skip_delay,siteName:"Pornhub",forgetUserAfter:e.forgetUserAfter,campaignName:e.campaign_name,skippable:e.skippable,clickableAreas:t,campaignWeight:e.percentChance}},r.push(i)}),r},registerPlayerEvents:function(o){var a=this,n=o.vcServerUrl||null;return{collapsePlayer:function(){a.togglePlayerSizeHD()},downloadsFlashMessage:function(e){document.getElementById("noPlayerMsg").removeAttribute("style")},expandPlayer:function(){a.togglePlayerSizeHD()},onSeek:function(){"undefined"!=typeof htTrack&&htTrack.ptrack()},onReady:function(e,t,i){"function"==typeof initVrPlayer&&initVrPlayer(),a.isShowPage&&a.chargePbBlock(),a.disablePopOnControls(),a.setBitmovinConfig(e,i,o),a.autoNextEnabled&&a.attachAutoNextCustomEvents(e,t,i),clearTimeout(a.playerLoadingTimer),a.disablePlaceholderImage()},onFullscreen:function(e){a.isShowPage&&a.triggerFullScreenDisplay(e)},onQualityUpsell:function(e,t,i){var r=a.getUpsellLinkcode(i.resolution);r&&("mobile"==a.platform?triggerGatewayModal(t,o.skipGatewayModal,r,phOrientationSegment):triggerUpselllGatewayModal(r,phOrientationSegment)),MHP1138.players[e].fullscreen().exit()},showPauseRoll:function(){"undefined"!=typeof trailerPauseRoleInstance?trailerPauseRoleInstance.openAdBlock():"undefined"!=typeof Pb_block&&Pb_block.openAdBlock()},showPostRoll:function(){var e=MG_Utils.getCookie("autoplay");"undefined"!=typeof Pb_block&&(Pb_block.params.showBlock=!0,Pb_block.openAdBlock()),e&&"on"===e&&"undefined"!=typeof VueUpNextVideo&&VueUpNextVideo.showOverlay()},showPreRoll:function(){a.isPrerollPlaying=!0;var e,t,i=i||("undefined"!=typeof page_extra_params?page_extra_params:null);if(i&&(i.prerollFired=!0,a.isShowPage))for(var r in i.zoneDetails){i.zoneDetails.hasOwnProperty(r)&&(e=i.zoneDetails[r],t=document.getElementById(e.frameId),void 0!==e.preroll_change_url&&t&&t.setAttribute("src",e.preroll_change_url))}},hidePreRoll:function(){a.isPrerollPlaying=!1,a.setupVerticalLogic()},onPlaylistCountdown:function(e,t,i){"undefined"!=typeof varObj&&1==parseInt(varObj.dataMainContainer.data("playlist-check"))&&playlist_countdown(i.count)},verticalPlayer:function(e,t,i){"9x16"==i.text&&(a.isVideo3x4=!0)},horizontalPlayer:function(e,t,i){"4x3"==i.text&&(a.isVideo3x4=!1)},onPlay:function(e,t,i){var r=document.getElementById(e),o=r&&r.querySelector("video").currentTime;Math.floor(o);"undefined"!=typeof VIDEO_SHOW&&VIDEO_SHOW.isQrCode&&VIDEO_SHOW.feelIsUserConnected&&$feel.subs.play(o),a.setupVerticalLogic(),PlayerWidgetCommonMethods.pingVCS(n),a.hidePauseRoll()},onEnd:function(e,t,i){var r=void 0!==MHP1138.players[e].autoNext?MHP1138.players[e].autoNext():null;r&&a.isPurchaseFlowOpen&&r.disable()},onPause:function(){"undefined"!=typeof VIDEO_SHOW&&VIDEO_SHOW.isQrCode&&VIDEO_SHOW.feelIsUserConnected&&$feel.subs.stop()},onTimeChange:function(e){var t=document.getElementById(e),i=t&&t.querySelector("video").currentTime,r=t&&t.querySelector("video").duration,o=document.querySelector(".countdown"),a=Math.floor(i);"undefined"!=typeof VIDEO_SHOW&&VIDEO_SHOW.isQrCode&&VIDEO_SHOW.feelIsUserConnected&&$feel.subs.timeupdate(i),5<r-a&&(VIDEO_SHOW.delay=5,o&&MG_Utils.addClass(o,"displayNone")),"undefined"!=typeof VueUpNextVideo&&VueUpNextVideo.detectTime(a)}}},getPlayerConfig:function(e,t){var i=void 0!==t.tubesCmsPrerollConfigType?t.tubesCmsPrerollConfigType:null;return{seekParams:{mp4:t.mp4_seek,flv:"fv"},deviceType:this.platform,autoPlayVideo:{enabler:!1},quickSetup:"pornhub",locale:t.language,autoplay:!(!this.isShowPage||!this.isUtahDomain||"desktop"!=this.platform)&&t.autoplay,startOffset:this.urlParams.t?this.urlParams.t:0,errorReports:t.errorReports,viewedRequestTimeout:60,viewedRequestURL:t.viewedRequestURL,hotspots:{data:t.hotspots?t.hotspots:[]},bitmovinConfig:{key:t.bitmovinAnalyticsKey},nextVideo:this.parseData.showNextVideoOption?this.nextVideoBtnConfig(t.nextVideo):{},mainRoll:{adaptive:{prebufferGoal:40},actionTags:t.actionTags,mediaPriority:t.mediaPriority,mediaDefinition:t.mediaDefinitions,poster:t.image_url,thumbs:{urlPattern:t.thumbs.urlPattern,type:"normal",samplingFrequency:t.thumbs.samplingFrequency,thumbWidth:t.thumbs.thumbWidth,thumbHeight:t.thumbs.thumbHeight,cdnType:t.thumbs.cdnType},videoUrl:t.link_url,duration:t.video_duration,title:t.video_title,videoUnavailable:!1,videoUnavailableMessage:"",qualityUpsell:this.getUpsellFlag(t.display_hd_upsell),closedCaptions:t.closedCaptionsFile,vertical:"true"==t.isVertical||!0===t.isVertical},hlsConfig:{maxInitialBufferLength:t.maxInitialBufferLength,maxBufferLength:this.isPremium?60:20,maxMaxBufferLength:this.isPremium?60:20},version:MHP1138.appVersion,type:this.platform,priority:"hls",library:"bitmovin",menu:{relatedUrl:t.related_url,showOnPause:!1},features:{ccVisible:this.ccExperimentEnabled,ccMenu:this.ccExperimentEnabled,themeColor:"#f6921e",embedCode:t.embedCode,autoplay:!(!this.isShowPage||!this.isUtahDomain||"desktop"!=this.platform)&&t.autoplay,showHotspots:!0,cinema:!!e.getAttribute("data-enlarge"),ignorePreferences:!this.isShowPage||!this.isUtahDomain,iosAutoFullscreen:"mobile"==this.platform,options:!0,showAutoplayOption:!!e.getAttribute("data-showautoplayoption"),hideControlsTimeout:2,speed:!0,nextVideo:!0,share:!1,topBar:!1,volume:!0,seekPreviewBlur:!1},flashSettings:{postRollUrl:this.isPremium?"":t.postroll_url,pauseRollUrl:this.isPremium?"":t.pauseroll_url,htmlPauseRoll:this.isPremium?"false":"true",htmlPostRoll:this.isPremium?"false":"true",extraFlashvars:{oldFlash:{hidePostPauseRoll:this.isPremium},fourPlay:{tracking:[{reportType:"qosevents",rollType:"video",rollTiming:"main",cdn:t.cdn,startLagThreshold:t.startLagThreshold,outBufferLagThreshold:t.outBufferLagThreshold}]}}},eventTracking:{cdn:t.cdn,isp:t.isp,geo:t.geo,enabled:!0,videoId:this.getVideoKey},events:this.registerPlayerEvents.call(this,t),vast:"old"==i&&this.showPreroll(t.preroll)?this.buildPrerollObj(t.preroll):null,preroll:"new"!=i&&void 0!==t.preroll||!this.showPreroll(t.prerollGlobalConfig)?null:t.prerollGlobalConfig,isVideoPage:this.isShowPage,vrProps:this.getVrProps,isVr:this.isVrVideo}},loadPlayer:function(){var e,t,i,r,o;playerObjList.hasOwnProperty(this.uniqueId)&&(e=playerObjList[this.uniqueId].flashvars.embedId,t=window["flashvars_"+e],i="playerDiv_"+e,r=window[i],o=document.getElementById(i),void 0!==(this.playerConfig=t)&&void 0!==r&&"undefined"!=typeof MHP1138&&(r.getAttribute("data-processed")||(r.setAttribute("data-processed",1),this.isSafari5&&o&&MG_Utils.addClass(o,"unsupported-safari"),t.closedCaptionsFile&&this.setCcExperimentValues(),MHP1138.createPlayer(i,this.getPlayerConfig.call(this,r,t))),"desktop"===this.platform&&this.destroyPlayer(i)))},setBitmovinConfig:function(e,t,i){var r,o;"undefined"!=typeof bitmovin&&bitmovin.analytics&&(r=MHP1138.players[e],(o={bitmovinPlayerKey:i.bitmovinPlayerKey,videoElement:t.element.querySelector("video"),videoId:e?e.split("_").pop():"",title:i.video_title,cdn:i.cdn,enableDebug:i.enableBitmovinDebug,vkey:this.getVideoKey,playerType:t.playerType,siteName:this.isPremium?"Pornhubpremium":"Pornhub",version:MHP1138.appVersion,adaptivePlayer:void 0!==r.getAdaptivePlayer?r.getAdaptivePlayer():null,experimentId:i.experimentId,ccProp:this.ccExperimentValue}).videoElement&&o.videoId&&this.setBitmovin(o))},getProbability:function(e){return Math.random()<e},setCcExperimentValues:function(){var e,t,i;"undefined"!=typeof PH_Storage&&(t=(e=PH_Storage.getItem("mhp1138_player"))?e.closedCaptions:null,i=this.getProbability(.5),t?(this.ccExperimentEnabled=t.visible,this.ccExperimentValue=t.visible?"forcedClosedCaptionsOn":"forcedClosedCaptionsOff"):(this.ccExperimentEnabled=i,this.ccExperimentValue=i?"forcedClosedCaptionsOn":"forcedClosedCaptionsOff"))},setBitmovin:function(e){var t={key:e.bitmovinPlayerKey,config:{backendUrl:"https://analytics-ingress.pandorastreaming.com/"},videoId:e.vkey,title:e.title,cdnProvider:e.cdn,customData1:e.vkey,customData2:e.playerType,customData3:e.version,customData4:e.siteName,customData5:e.experimentId};e.enableDebug&&(t.debug=!0),e.ccProp&&(t.experimentName=e.ccProp),this.registerPlayer(e,t)},registerPlayer:function(e,t){try{e.adaptivePlayer&&"hls"===e.adaptivePlayer.name?new bitmovin.analytics.HlsAdapter(t,e.adaptivePlayer.player,{starttime:this.prePlayerInitTime}):new bitmovin.analytics.adapters.HTMLVideoElementAdapter(t,e.videoElement)}catch(e){console.log(e)}},attachAutoNextCustomEvents:function(e,t,i){var o=void 0!==MHP1138.players[e].autoNext?MHP1138.players[e].autoNext():null,a=this;o&&(document.addEventListener("click",function(e){var t=e.target,i=MG_Utils.hasClass(t,"js-paidDownload")||MG_Utils.closest(t,".js-paidDownload"),r=t?MG_Utils.hasClass(t,"purchase_flow_close"):null;i&&(a.isPurchaseFlowOpen=!0),r&&(a.isPurchaseFlowOpen=!1),o.hide()}),window.addEventListener("blur",function(e){o.hide()}))},playerLoadingTimeout:function(){var e=this;this.playerLoadingTimer=setTimeout(function(){e.sendPlayerErrorDetails()},5e3)},sendPlayerErrorDetails:function(){var t=this,e=this.uniqueId?this.uniqueId.split("_").pop():"",i=MG_Utils.getCookie("platform_cookie_reset");"undefined"!=typeof playerIssuesUrl&&playerIssuesUrl&&e&&MG_Utils.ajaxCall({url:playerIssuesUrl,type:"GET",data:{id:e,error:"playerNotLoaded",format:this.playerConfig.mediaPriority?this.playerConfig.mediaPriority:"mp4",platform:i||this.platform},success:function(e){!e||e.success||t.problemStatusResent||(t.problemStatusResent=!0,t.sendPlayerErrorDetails())}})},setupVerticalLogic:function(){var e=this;this.isVideo3x4&&!this.isPrerollPlaying&&"desktop"==this.platform&&(this.resizeVerticalVideo(),window.addEventListener("resize",function(){e.resizeVerticalVideo()}),this.isVideo3x4=!1)},disablePlaceholderImage:function(){var e=this.$el.parentElement.parentElement.querySelector(".videoElementPoster");e&&MG_Utils.addClass(e,"displayNone")},hidePauseRoll:function(){"undefined"!=typeof trailerPauseRoleInstance?trailerPauseRoleInstance.closeAdBlock():"undefined"!=typeof Pb_block&&Pb_block.closeAdBlock()}},computed:{parseData:function(){return this.dataAttributes?JSON.parse(this.dataAttributes):null},playerEnvironment:function(){return"undefined"!=typeof playerEnvironment?playerEnvironment:""},getVideoKey:function(){return"undefined"!=typeof VIDEO_SHOW?VIDEO_SHOW.vkey:""},isSafari5:function(){return!!navigator.userAgent.match(" Safari/")&&!navigator.userAgent.match(" Chrom")&&!!navigator.userAgent.match(" Version/5.")},isPremium:function(){return 1==this.premiumFlag},isShowPage:function(){return"undefined"!=typeof isShowPage},isUtahDomain:function(){return"undefined"==typeof isUtah||!isUtah},isVrVideo:function(){return"undefined"!=typeof isVr&&isVr},getVrProps:function(){return"undefined"!=typeof vrProps?vrProps:""}},mounted:function(){var e=this;this.prePlayerInitTime=(new Date).getTime(),setTimeout(function(){e.loadPlayer(),e.playerLoadingTimeout()},0)},template:'<div :id="uniqueId" class="playerFlvContainer" :data-enlarge="parseData ? parseData.showEnlargeButton : null":data-showautoplayoption="parseData ? parseData.showAutoplayOption : null" :data-share="parseData ? parseData.showShare : null" :data-currenttime="0" :data-shownextvideooption="parseData ? parseData.showNextVideoOption : null"><noscript><video style="width:100%; height:100%;" controls="controls" autobuffer="autobuffer" class="player-html5" preload="metadata"><source src="" type="video/mp4"></video></noscript><div id="noPlayerMsg" style="display:none"><a href="http://get.adobe.com/flashplayer/" rel=nofollow alt="Porn Video flash Player" border="0"><img src="" width="608" height="481" /></a></div></div>'})},e.setAttribute("src",playerScriptUrl))}}}(),VrFormatFinder=function(){"use strict";return{setVrFormat:function(e){var t,i;e&&(i=function(e,t,i){var r=new RegExp("([?&])"+e+"=.*?(&|#|$)","i");if(void 0===t)return i.match(r)?i.replace(r,"$1$2"):i;if(i.match(r))return i.replace(r,"$1"+e+"="+t+"$2");var o="";-1!==i.indexOf("#")&&(o=i.replace(/.*#/,"#"),i=i.replace(/#.*/,""));var a=-1!==i.indexOf("?")?"&":"?";return i+a+e+"="+t+o}("format",t=function(e,t){var i;switch(t){case 1:i=2==e?"STEREO_360_LR":"STEREO_180_LR";break;case 2:i=2==e?"STEREO_360_TB":"STEREO_180_TB";break;case 3:i=2==e?"STEREO_360_LR":"STEREO_FLAT_LR";break;case 4:i=2==e?"STEREO_360_TB":"STEREO_FLAT_TB";break;case"MONO":i=1==e?"MONO_FLAT":"MONO_360";break;default:i="MONO_360"}return i}(vrProps.projection,vrProps.stereoType),e.getAttribute("cors-fallback-url")),e.setAttribute("format",t),e.setAttribute("cors-fallback-url",i))},pingVcsHandler:function(e){var t,i,r;e&&(t=PlayerWidgetCommonMethods.getKeys(playerObjList),i=playerObjList[t[0]].flashvars.embedId,r=window["flashvars_"+i].vcServerUrl||null,e.addEventListener("play",function(e){PlayerWidgetCommonMethods.pingVCS(r)}))}}}();!function(){var e=document.getElementById("videoPlayerPlaceholder"),t=document.querySelector("dl8-video");"undefined"!=typeof VIDEO_SHOW&&VIDEO_SHOW.isVr&&t?(e&&(e.style.display="block"),VrFormatFinder.setVrFormat(t),VIDEO_SHOW.isPremium||VrFormatFinder.pingVcsHandler(t)):"undefined"!=typeof Vue&&VueVideoCustomElement.initializePlayer()}();