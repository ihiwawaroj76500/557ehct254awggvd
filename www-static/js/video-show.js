var $urlPremiumTab,playlistsByTitleAsc,playlistsByTitleDesc,playlistsByUpdated,VIDEO_SHOW=void 0!==VIDEO_SHOW?VIDEO_SHOW:{},varObj={dataCategory:$j("#categorySuggestions"),dataPauseRoll:$j("#pb_template"),dataPlayList:$j("#js-playlistData"),dataMainContainer:$j("#main-container"),dataShare:$j("#js-shareData"),dataRelatedVideos:$j("#relatedVideosVPage"),dataTabs:$j("#js-tabData"),locked:void 0!==VIDEO_SHOW.locked&&VIDEO_SHOW.locked},tags="(?:[^\"'>]|\"[^\"]*\"|'[^']*')*",sanicode=new RegExp("<(?:!--(?:(?:-*[^->])*--+|-?)|script\\b"+tags+">[\\s\\S]*?</script\\s*|style\\b"+tags+">[\\s\\S]*?</style\\s*|/?[a-z]"+tags+")>","gi"),current_page=2,loadingThumbs=!1,$urlShortVersion="http://tour.pornhubpremium.com/relatedpremium/default/?layout=vertical1";function triggerShareClick(){$j(".js-triggerShare").trigger("click")}function displaySort(e,a){$j("#custom-playlist-detailed li.custom").remove(),$j.each(e,function(e,a){$j("#custom-playlist-detailed").append("<li class='custom"+(a.saved||1==a.contains_current_video?" saved":"")+"'><a href='javascript:' _id='"+a.id+"' data-videoid='"+a.id+"' class='playlist-add-video-viewpage js-addToPlaylistAnchor' data-type='custom'><span class='playlist-name'>"+a.title+" (<var id='watchLaterCount_"+a.id+"'>"+a.video_count+"</var>)</span><span class='updated-time'>"+a.date_updated+"</span><span class='status savedToPlaylistMessage'>saved to playlist</span><span class='status alreadyInPlaylistMessage'"+(1==a.contains_current_video?" style='display: block;'":"")+">Video is already in playlist</span><div class='clear'></div></a></li>")}),$j("#scrollbar_watch").slimScroll({height:"auto",color:"#F39000",size:"7px",alwaysVisible:!1,railVisible:!0,railOpacity:1,railColor:"#222",distance:0,opacity:1,railClass:"track3",barClass:"handle3"})}1==varObj.dataMainContainer.data("liu")&&(playlistsByTitleAsc=varObj.dataCategory.data("playlists-asc"),playlistsByTitleDesc=varObj.dataCategory.data("playlists-desc"),playlistsByUpdated=varObj.dataCategory.data("playlists-updated"));var flagVideoModal,$this,ad_segment_id,segment,iframe_url,ad_player_id,showDeleteFromCarousel,vkey,baseUrl,videosVkeys,playlistId,playlistTitle,playlistTags,removeVideoFromPlaylist,videos,srcA,srcB,flagVideoContent=document.getElementById("flagVideoModal");function showMore(){VIDEO_SHOW.checkDvdCover?$j(".showMore").slideToggle():$j(".showLess").slideToggle(),$j(".show-more-btn").text()==VIDEO_SHOW.showmoreText?$j(".show-more-btn").text(VIDEO_SHOW.showlessText):$j(".show-more-btn").text(VIDEO_SHOW.showmoreText)}function getShareLink(){var e,a,t,s,i=varObj.dataShare.data("share-url");$j("#chkShareLinkStartTime").prop("checked")&&$j("#share-link-start-time").val()&&(-1==$j("#share-link-start-time").val().indexOf(":")?i=i+"&t="+parseInt($j("#share-link-start-time").val()):2==(e=$j("#share-link-start-time").val().split(":")).length&&(a=parseInt(e[0]),t=parseInt(e[1]),(s=parseInt(60*a+t))<=varObj.dataShare.data("duration")&&(i=i+"&t="+s))),$j("#share-link").val(i)}function categorySubmit(){var t=[];$j("#categorySuggestions .chooseCat li.selected a").each(function(e,a){t.push($j(a).attr("data-rel"))}),0===t.length?$j("#categorySuggestions p.status").removeClass("status_ok").addClass("status_error").html("Please select at least one category to submit"):$j.ajax({type:"POST",url:varObj.dataCategory.data("category-url"),data:{category_id:t,vkey:varObj.dataCategory.data("vkey")},success:function(){$j("#categorySuggestions .chooseCat, #categorySuggestions .submit, #categorySuggestions .section_title").hide(),$j("#categorySuggestions p.status").removeClass("status_ok status_error").addClass("success").html("Thank you for your submission."),setTimeout(function(){$j("a#categoryLink").attr("onclick","").unbind("click").fadeOut()},3e3)}})}function jumpToAction(e){MHP1138.players["playerDiv_"+ad_player_id].seek(e,!0)}function loadPremiumNoGoodBrowser(){$urlPremiumTab=$urlShortVersion}function showRelatedVids(){var e=$j("#relatedVideosVPage"),a=e.find("li"),t=$j("#player").height()+$j("#under-player").height()+$j("#under-player-comments").height()+$j("#under-player-playlists").height()+$j("#under-player-friends").height(),s=e.find("li").height(),i=8;(i=1==current_page?2*Math.floor((t-$j("#videoPageAds").height()-64)/s):2===current_page?10:10*current_page)<8?i=8:50<i&&(i=60,$j(".nav-videoRelated").hide()),a.hide().slice(0,i).css("display","inline-block")}function elementScroll(e){$j(window).scrollTop(e.offset().top).scrollLeft(e.offset().left)}function go(e){var a=document.querySelector(".video-box-playlist li a[data-vkey="+e+"]"),t=!!(a&&a.getAttribute("onclick")&&a.getAttribute("data-entrycode"));a&&t?a.click():window.location="/view_video.php?viewkey="+e+"&pkey="+escapeHtml(varObj.dataMainContainer.data("playlist-id"))}function shareToStream(e){return $j.ajax({type:"POST",data:e,dataType:"json",url:VIDEO_SHOW.shareToStreamUrl})}function disableSubmit(s){var i;s&&(i=setInterval(function(){var e,a=$j("."+s+" input"),t=$j("."+s+" input:checked");a.length&&(t.length||((e=$j("#flagSubmit")).prop("disabled",!0),e.addClass("disabledButton"),a.on("change",function(){e.prop("disabled",!1),e.removeClass("disabledButton")})),clearInterval(i))},500))}flagVideoContent&&(flagVideoModal=new MG_Modal({content:flagVideoContent,className:"flagItemContainer flagVideo"})),head.ready(document,function(){$j(".showUpSell").on("click",function(e){e.preventDefault();var a=$j(this).data("linkcode");triggerUpselllGatewayModal(a,phOrientationSegment)}),globalObjUtils.isMac&&globalObjUtils.isSafari&&isVr&&alert("This feature is not supported on your current browser!"),setTimeout(function(){$j("#placeHolderWrap").css("background-image",'url("'+VIDEO_SHOW.placeholder+'")')},500),-1<location.href.indexOf("select-share")&&setTimeout(function(){$j(".js-triggerShare").trigger("click"),$j("#share_email_text").text($j("#share_email_text").text().replace("#select-share","")),elementScroll($j("#js-shareData"))},250),1==varObj.dataMainContainer.data("liu")&&playlistAppendAsc(),$j("#suggestCatSubmit").on("click",function(){var e=$j("#suggestCatInput").tokenInput("get"),t=[];$j.each(e,function(e,a){t.push(a.id)}),$j.isEmptyObject(e[0])?$j("#suggestCatResult").html("You need to enter a category").css("color","red").hide().fadeIn():$j.ajax({url:$j("#categorySuggestions").data("category-url"),type:"POST",data:{category_id:t},success:function(){$j("#suggestCatResult").html(VIDEO_SHOW.thankYouMessageCat).css("color","#65a611").hide().fadeIn(),$j("#suggestCatInput").tokenInput("clear"),$j("#suggestCatInput").blur(),$j(".token-input-dropdown").hide()}})}),$j("#suggestTagSubmit").on("click",function(){var e=$j("#suggestTagInput").tokenInput("get"),t=[];$j.each(e,function(e,a){t.push(a.name)}),$j.isEmptyObject(e[0])?$j("#suggestTagResult").html("You need to enter a tag").css("color","red").hide().fadeIn():$j.ajax({url:$j("#existingWrap").data("tag-url"),type:"POST",data:{tags:t},success:function(){$j("#suggestTagResult").html(VIDEO_SHOW.thankYouMessageTag).css("color","#65a611").hide().fadeIn(),$j("#suggestTagInput").tokenInput("clear"),$j("#suggestTagInput").blur(),$j(".token-input-dropdown").hide()}})}),$j("#category-box button.upVote").each(function(e,a){var i=$j(this),o=i.data("categoryid"),t=$j.parseJSON(getCookieAdvanced("videoCategoryRated"));t&&$j.map(t,function(e,a){var t=e.split("|"),s=a.split(".");o==parseInt(t[1])&&1==parseInt(t[0])&&s[0]==$j("div.existingWrap").data("vid")&&(i.addClass("triggerUp").attr("disabled","disabled"),i.siblings().addClass("disableVote").attr("disabled","disabled"))})}),$j("#category-box button.downVote").each(function(e,a){var i=$j(this),o=i.data("categoryid"),t=$j.parseJSON(getCookieAdvanced("videoCategoryRated"));t&&$j.map(t,function(e,a){var t=e.split("|"),s=a.split(".");o==parseInt(t[1])&&0==parseInt(t[0])&&s[0]==$j("div.existingWrap").data("vid")&&(i.addClass("triggerDown").attr("disabled","disabled"),i.siblings().addClass("disableVote").attr("disabled","disabled"))})}),$j("#category-box button.upVote").on("click",function(){var e=$j(this);$j.ajax({type:"POST",url:$j(this).data("suggestcategory-url"),success:function(){e.addClass("triggerUp").attr("disabled","disabled"),e.siblings().addClass("disableVote").attr("disabled","disabled")}})}),$j("#category-box button.downVote").on("click",function(){var e=$j(this);$j.ajax({type:"POST",url:$j(this).data("suggestcategory-url"),success:function(){e.addClass("triggerDown").attr("disabled","disabled"),e.siblings().addClass("disableVote").attr("disabled","disabled")}})}),$j("#production-box button#productionid").on("click",function(){var e=$j(this);$j.ajax({type:"POST",url:$j(this).data("production-url"),success:function(){e.addClass("triggerUp").parent().css("color","#f90").attr("disabled","disabled"),$j("#production-box button#homeadeid").addClass("disableVote").attr("disabled","disabled")}})}),$j("#production-box button#homeadeid").on("click",function(){var e=$j(this);$j.ajax({type:"POST",url:$j(this).data("production-url"),success:function(){e.addClass("triggerUp").attr("disabled","disabled").parent().css("color","#f90"),$j("#production-box button#productionid").addClass("disableVote").attr("disabled","disabled")}})}),$j("#production-box button.upVote").each(function(e,a){var i=$j(this),o=i.data("production-title"),t=$j.parseJSON(getCookieAdvanced("videoProductionRated"));t&&$j.map(t,function(e,a){var t=e.split("|"),s=a.split(".");o==t[1]&&1==parseInt(t[0])&&s[0]==$j("#existWrap").data("vid")&&(i.addClass("triggerUp").parent().css("color","#f90"),$j("#production-box button.upVote").addClass("disableVote").attr("disabled","disabled"))})}),$j("#tag-box button.upVote").on("click",function(){var e=$j(this);$j.ajax({type:"POST",url:$j(this).data("suggesttag-url"),success:function(){e.addClass("triggerUp").attr("disabled","disabled"),e.siblings().addClass("disableVote").attr("disabled","disabled")}})}),$j("#tag-box button.downVote").on("click",function(){var e=$j(this);$j.ajax({type:"POST",url:$j(this).data("suggesttag-url"),success:function(){e.addClass("triggerDown").attr("disabled","disabled"),e.siblings().addClass("disableVote").attr("disabled","disabled")}})}),$j("#tag-box button.upVote").each(function(e,a){var i=$j(this),o=i.data("tagid"),t=$j.parseJSON(getCookieAdvanced("videoTagRated"));t&&$j.map(t,function(e,a){var t=e.split("|"),s=a.split(".");o==parseInt(t[1])&&1==parseInt(t[0])&&s[0]==$j("#existWrap").data("vid")&&(i.addClass("triggerUp").attr("disabled","disabled"),i.siblings().addClass("disableVote").attr("disabled","disabled"))})}),$j("#tag-box button.downVote").each(function(e,a){var i=$j(this),o=i.data("tagid"),t=$j.parseJSON(getCookieAdvanced("videoTagRated"));t&&$j.map(t,function(e,a){var t=e.split("|"),s=a.split(".");o==parseInt(t[1])&&0==parseInt(t[0])&&s[0]==$j("#existWrap").data("vid")&&(i.addClass("triggerDown").attr("disabled","disabled"),i.siblings().addClass("disableVote").attr("disabled","disabled"))})}),$j(document).on("click","#categoryLink",function(){ga("send","event","Watch Page","click","Suggest Categories"),$j("#category-box").slideToggle()}),$j(document).on("click","#tagLink",function(){ga("send","event","Watch Page","click","Suggest Tags"),$j("#tag-box").slideToggle()}),$j("#suggestCatInput").tokenInput("/video/category_suggestion_list?vid="+$j("#existWrap").data("vid")+"&vkey="+$j("#existWrap").data("vkey")+"&segment="+$j("#existWrap").data("segment")+"&token="+$j("#existWrap").data("token"),{queryParam:"term",hintText:"Type in a category",minChars:3,tokenLimit:3,preventDuplicates:!0,resultsFormatter:function(e){return"<li><span style='color:#ababab;font-size:15px;'>+</span> "+e.name+"<span style='float:right;padding:5px;background:#181818;font-weight:bold;border-radius:4px;color:#fff;'>"+e.vote+"</span></li>"}}),$j("#token-input-suggestCatInput").attr("placeholder",$j("#suggestCatInput").attr("placeholder")),void 0!==VIDEO_SHOW&&void 0!==VIDEO_SHOW.tag_suggestion_url&&($j("#suggestTagInput").tokenInput(VIDEO_SHOW.tag_suggestion_url,{queryParam:"q",hintText:"Type in a Tag",minChars:3,tokenLimit:3,preventDuplicates:!0,resultsFormatter:function(e){var a=e.vote?e.vote:0;return"<li><span style='color:#ababab;font-size:15px;'>+</span> "+$j("<div/>").text(e.name).html()+"<span style='float:right;padding:5px;background:#181818;font-weight:bold;border-radius:4px;color:#fff;'>"+a+"</span></li>"},onResult:function(e){var t=$j("#token-input-suggestTagInput").val(),s=!1;if($j.each(e,function(e,a){a.name.toLowerCase()==t.toLowerCase()&&(s=!0)}),!s){if(t.match(sanicode))return!1;e.unshift({id:0,name:t})}return e},onAdd:function(t){var s=$j("#suggestTagInput").tokenInput("get"),i=!1;$j.each(s,function(e,a){a.name.toLowerCase()==t.name.toLowerCase()&&(i&&(s.pop(),$j("#suggestTagInput").tokenInput("clear"),$j.each(s,function(e,a){$j("#suggestTagInput").tokenInput("add",{id:a.id,name:a.name})})),i=!0)})}}),$j("#token-input-suggestTagInput").attr("placeholder",$j("#suggestTagInput").attr("placeholder"))),$j(document).on("click",".favPlaylist",function(){1==varObj.dataMainContainer.data("liu")?(token=varObj.dataMainContainer.data("token"),favoritePlaylist(playlistId,token)):signinbox.show(textPHTranslation.loginTitlePlaylist)}),$j(".actionTagSort").click(function(){var e=$j(this);$j(".sortBy").hide(),$j(".sortBy."+e.data("sort")).show(),$j("#tagSort").text(e.text())}),$j("body").on("click","#relatedVideosVPage li a",function(e){var a=$j(this).data("related-url");a&&(e.preventDefault(),$j.ajax({type:"GET",context:this,url:a,complete:function(){var e=$j(this).attr("href");window.location.assign(e)},success:function(e){}}))}),$j("body").on("click",".sendMailBtn",function(){var e=$j(".toEmail").val();return""!=e&&/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)?$j(".toEmail").removeClass("modalInputError"):$j(".toEmail").addClass("modalInputError"),!1}),1==varObj.dataMainContainer.data("playlist-shuffle")&&$j("#shuffle").addClass("active");var e,a,t=1==parseInt(varObj.dataMainContainer.data("playlist-geo-check")),s=1==parseInt(varObj.dataMainContainer.data("is-premium")),i=1==parseInt(varObj.dataMainContainer.data("playlist-check")),o=1==parseInt(varObj.dataMainContainer.data("is-fanonly")),l=0;i&&(t||s||o)&&(e=3,a=setInterval(function(){playlist_countdown(e),l||e--,-1==e&&clearInterval(a)},1e3),$j(document).on("click",".removeAdLink, .modalBackground",function(){l=!l,e=3})),1==varObj.dataMainContainer.data("liu")&&(dropdown.init(".sortPlaylist"),displaySort(playlistsByUpdated),$j(".sortPlaylist li").on("click",function(){$j(".sortPlaylist .textFilter").html($j(this).text()),displaySort(window[$j(this).children("a").data("function")])})),$j("#popupBox").hide(),"Explorer"==BrowserDetect.browser&&BrowserDetect.version<9&&loadPremiumNoGoodBrowser();var n=varObj.dataRelatedVideos.data("related-count"),d=12;function r(e){VIDEO_SHOW.isPurchased?c(e):videoPurchaseFlow.triggerPurchaseFlow()}function c(e){var a,t;$j(".tab-menu-item").removeClass("active"),$j(e).addClass("active"),$j(".video-action-tab").removeClass("active"),$j(".video-action-tab."+$j(e).data("tab")).addClass("active"),"add-to-tab"==$j(e).data("tab")&&($j("#scrollbar_watch").slimScroll({height:"auto",color:"#F39000",size:"7px",alwaysVisible:!1,railVisible:!0,railOpacity:1,railColor:"#222",distance:0,opacity:1,railClass:"track3",barClass:"handle3"}),a=document.querySelector(".js-share"),t=document.querySelector(".js-shareOutcome"),a&&(MG_Utils.removeClass(a,"disabledShareBtn"),a.disabled=!1),t&&MG_Utils.removeClass(t,"active")),VIDEO_SHOW.isPremium&&"Download"==$j(e).find("span").html()&&"undefined"!=typeof mixpanel&&mixpanel.track("Download Video",videoEvent)}$j(".nav-videoRelated").click(function(){var s,e=$j("#relatedVideosVPage").find("li.hidden");return e.length?(s=10,e.length<18&&(s=e.length,$j(this).hide()),e.map(function(e,a){var t;e<s&&((t=$j(a).find("img")).attr("src",t.data("thumb_url")),$j(a).removeClass("hidden").css("display","inline-block"))})):loadingThumbs||(loadingThumbs=!0,current_page++,$j.get(varObj.dataRelatedVideos.data("related-url"),{id:varObj.dataRelatedVideos.data("related-id"),page:current_page,num_per_page:10},function(e){if(e){$j("#relatedVideosVPage .videos-list").append(e),$j("#relatedVideosVPage .videos-list ul:nth-child("+current_page+") > li a.img").each(function(){$j(this).attr("data-title",$j(this).attr("title")).attr("title","")}),2==current_page&&$j(".videos-list").children("ul").eq(1).html($j(".videos-list").children("ul").eq(1).children().slice(2)),loadThumbs(),showRelatedVids();for(var a=$j(e).find(".tooltipTrig"),t=$j(e).find("#lrelateRecommendedItems .wrap"),s=0;s<a.length;++s)initTooltip(a[s],a[s].getAttribute("data-title")),MG_Utils.addEventHandler(a[s],"click",addToSubmenu);for(s=0;s<t.length;s++)MG_Utils.addEventHandler(t[s],"mouseenter",showOverlay),MG_Utils.addEventHandler(t[s],"mouseleave",hideOverlay);loadingThumbs=!1,n<=(d+=10)&&$j(".nav-videoRelated").hide()}else $j(".nav-videoRelated").hide()})),!1}),showRelatedVids(),1==varObj.dataMainContainer.data("playlist-check")&&setTimeout('$j("body").scrollTo($j(".playlist-bar")[0], 1000)',500),1==varObj.dataMainContainer.data("delete-check")&&$j(".shareTrig").on("click",addShareExternal),$j("[data-tab='download-tab']").not(".js-paidDownload, .js-videoGeoUnavailable").on("click",function(){(VIDEO_SHOW.saleVideo?r:c)(this)}),$j(".js-paidDownload").on("click",function(e){r(this)}),$j(".js-videoGeoUnavailable").on("click",function(e){e.stopImmediatePropagation(),$j(".tab-menu-item").removeClass("active"),$j(".video-action-tab").removeClass("active"),$j(".download-tab").addClass("active"),$j(".videoGeoUnavailableWrapper").toggleClass("hidden")}),$j(".tab-menu-item").on("click",function(){"download-tab"!=$j(this).data("tab")&&c(this)}),$j(".download-tab .closeBtn, .dismissButton").click(function(e){e.preventDefault(),$j(this).parent().removeClass("active"),$j('.tab-menu-item[data-tab="about-tab"]').click()}),$j(".tab-sub-menu-item").on("click",function(){$j(this).parent().find(".tab-sub-menu-item").removeClass("active"),$j(this).addClass("active"),$j(this).parents(".video-action-tab").find(".video-action-sub-tab").removeClass("active"),$j(this).parents(".video-action-tab").find(".video-action-sub-tab."+$j(this).data("tab")).addClass("active")}),1==function(e){for(var a=window.location.search.substring(1).split("&"),t=0,s=a.length;t<s;t++){var i=a[t].split("=");if(i[0]==e)return i[1]}return!1}("activated_download")?($j("#upgradeSuccessMessage").show(),$j("#downloadMessage").hide(),$j('.tab-menu-item[data-tab="download-tab"]').click()):($j("#upgradeSuccessMessage").hide(),$j("#downloadMessage").show()),$j(".confirmationButton").on("click",function(){$j(".js-InitialFreeAccount").hide(),$j(".js-confirmationInitialFreeAccount").show(),"undefined"!=typeof mixpanel&&mixpanel.track("Upgrade confirmation",videoEvent)}),$j(".downloadNowButton").on("click",function(){$j("#upgradeSuccessMessage").hide(),$j("#downloadMessage").show()}),$j(".email button").on("click",function(){var a=$j(".video-action-sub-tab.email");$j.ajax({url:varObj.dataTabs.data("url"),type:"POST",data:{emailTo:$j("#share_email_to").val(),message:$j("#share_email_text").text()},success:function(e){dataJson=e,"TRUE"==dataJson.success?(a.find(".form").fadeOut(),a.find(".successMessage").fadeIn()):(dataJson.message&&a.find(".errorMessage").html(dataJson.message),a.find(".errorMessage").fadeIn())},error:function(){a.find(".form").fadeOut(),a.find(".errorMessage").fadeIn()}})}),$j(".video-action-sub-tab.email textarea").text("Hi, check this out - "+varObj.dataShare.data("share-url"));var u,g=varObj.dataTabs.data("default");function p(){var e=document.querySelector("#flagItem .flagDetails"),a=document.querySelector("#flagItem .contentRemovalMessage");"7"===this.value?(e&&MG_Utils.addClass(e,"displayNone"),a&&MG_Utils.removeClass(a,"displayNone")):(e&&MG_Utils.removeClass(e,"displayNone"),a&&MG_Utils.addClass(a,"displayNone"))}$j(".video-action-sub-tab.embed textarea").html(g),$j(".video-action-sub-tab.embed .embedSizeFilter li").on("click",function(){var e=new Array;e["560x315"]=varObj.dataTabs.data("default"),e["640x360"]=varObj.dataTabs.data("small"),e["853x480"]=varObj.dataTabs.data("medium"),e["1200x720"]=varObj.dataTabs.data("large");var a=$j(this).data("size-x"),t=$j(this).data("size-y");null!=e[a+"x"+t]&&($j(this).parents(".dropdownTrigger").find(".textFilter").text($j(this).find("span").text()),$j(".video-action-sub-tab.embed textarea").text($j("<div/>").html(e[a+"x"+t]).text())),$j(".video-action-sub-tab.embed textarea").select()}),dropdown.init(".embedSizeFilter .filters"),getShareLink(),$j("#chkShareLinkStartTime, #share-link-start-time").on("change",function(){getShareLink()}),1!=$j("#relateRecommendedItems").data("recommended")||varObj.locked||((u=$j(".recommendedVideos")).find(".thumbnail-info-wrapper").append('<div class="recommendedFor">Recommended for you</div>'),u.find(".views").remove(),u.find(".rating-container").remove()),$j("body").on("click","#flagSubmit",function(e){e.preventDefault();var a=$j(this);a.attr("disabled",!0),$j.ajax({type:"POST",url:$j(".flagCheckBox:checked").data("ajax-url"),data:{id:$j("#flagItem").data("video"),reason:$j("#flag_reason").val(),value:$j("#flagItem").find('input[name="flag_type"]:checked').val()},success:function(){flagVideoModal.closeModal(),setTimeout(function(){var e=infoModalContent("",VIDEO_SHOW.thankYouInputMessage,VIDEO_SHOW.videoFlaggedMessage,"");e&&(infoModalHolder=new MG_Modal({content:e,className:"infoModalContainer"}),infoModalHolder.openModal())},500)},error:function(){a.attr("disabled",!1)}})}),$j("[id^='token-input-']").unbind("blur").click(function(e){e.stopPropagation()}),$j(document).click(function(){$j(".token-input-dropdown").hide()}),$j(".js-portalName").click(function(){"undefined"!=typeof pornportalMessage?pornportalMessage.push(["dropDownOpen",null,$j(this).data("portal-name")]):document.location.assign(VIDEO_SHOW.noPortalURL)}),$j("#video_flag").on("click",function(e){if(e.preventDefault(),void 0!==flagVideoModal){flagVideoModal.openModal(disableSubmit("flagItemContainer"));for(var a=document.querySelectorAll("#flagItem .flagCheckBox"),t=0;t<a.length;t++)a[t].addEventListener("change",p)}})}),setTimeout(function(){var s=["6","36","63"],i={6:!1,36:!1,63:!1};$j("body").off("click","#categorySuggestions .chooseCat li"),$j("body").on("click","#categorySuggestions .chooseCat li",function(){var a,e=$j(this),t=e.children("a").attr("data-rel");e.hasClass("selected")?(e.removeClass("selected"),$j("#categorySuggestions .chooseCat li").removeClass("maxSelection"),$j("#categorySuggestions p.status").removeClass("status_error").addClass("status_ok").html("Please select up to 3 categories"),$j.each(s,function(e){i[s[e]]=!1})):-1<$j.inArray(t,s)?($j("#categorySuggestions .chooseCat li").removeClass("selected").addClass("maxSelection"),e.removeClass("maxSelection").addClass("selected"),i[t]=!0,$j("#categorySuggestions p.status").removeClass("status_error").addClass("status_ok").html("You cannot combine any other categories with the current selection")):(a=!1,$j.each(s,function(e){1==i[s[e]]&&(a=!0,$j("#categorySuggestions p.status").removeClass("status_ok").addClass("status_error").html("You cannot combine any other categories with the current selection"))}),a||($j("#categorySuggestions .chooseCat li.selected").length<=2?(e.addClass("selected"),$j("#categorySuggestions p.status").removeClass("status_error").addClass("status_ok").html("Please select up to 3 categories"),3==$j("#categorySuggestions .chooseCat li.selected").length?($j("#categorySuggestions .chooseCat li").addClass("maxSelection"),$j("#categorySuggestions .chooseCat li.selected").removeClass("maxSelection").addClass("selected"),$j("#categorySuggestions p.status").removeClass("status_error").addClass("status_ok").html("You cannot select any more categories")):$j("#categorySuggestions .chooseCat li").removeClass("maxSelection")):$j("#categorySuggestions p.status").removeClass("status_ok").addClass("status_error").html("You cannot select any more categories")))})},100),1==varObj.dataPlayList.data("playlist-status")&&1==varObj.dataPlayList.data("already-favourite")&&($this=$j(".favPlaylist")).addClass("favorited"),1!=varObj.dataPauseRoll.data("pause-roll")&&1!=varObj.dataPauseRoll.data("post-roll")||(segment="straight"==(ad_segment_id=varObj.dataPauseRoll.data("segment"))?30781:30791,iframe_url=VIDEO_SHOW.trafficJunkyurl+"&zone_id="+segment+"&pid=8253a193-4fe9-45e3-909a-76b10a07659a&vs=1.0.2",ad_player_id=varObj.dataPauseRoll.data("unique-id")),currentVkey=varObj.dataCategory.data("vkey"),vKeyAddVideo=varObj.dataCategory.data("vkey"),showDeleteFromCarousel=1==varObj.dataMainContainer.data("playlist-user-check")||1==varObj.dataMainContainer.data("playlist-id-check")?"showClose":"",1==varObj.dataMainContainer.data("playlist-video-check")&&(vkey=varObj.dataCategory.data("vkey").toString(),baseUrl=varObj.dataMainContainer.data("base-url"),videosVkeys=varObj.dataMainContainer.data("playlist-keys"),removeVideoFromPlaylist=1==varObj.dataPlayList.data("playlist-status")?(playlistId=escapeHtml(varObj.dataMainContainer.data("playlist-id")),playlistTitle=varObj.dataMainContainer.data("playlist-title"),playlistTags=varObj.dataMainContainer.data("playlist-tags"),!0):varObj.dataMainContainer.data("pkey").match("watchlater")||varObj.dataMainContainer.data("pkey").match("lovers")?(playlistId=escapeHtml(varObj.dataMainContainer.data("playlist-id")),playlistTitle=varObj.dataMainContainer.data("playlist-title"),!(playlistTags="")):varObj.dataMainContainer.data("pkey").match("sys:")?(playlistId=escapeHtml(varObj.dataMainContainer.data("playlist-id")),playlistTitle=varObj.dataMainContainer.data("playlist-title"),playlistTags="",!1):!(playlistTags=playlistTitle=playlistId=""),videos=VIDEO_SHOW.buildPlaylistItems,$j.cookie("playlistShuffle_"+playlistId)?(originalShuffleStatus=1,$j("#shuffle").addClass("active")):originalShuffleStatus=0),$j(".notifClose").on("click",function(){$j(this).closest(".notifContainer").addClass("displayNone")}),-1!=document.referrer.indexOf("/video?c=73")&&(srcA=$j("#videoPageAds .TJVideo1A").attr("src")+"[EOL]",srcB=$j("#videoPageAds .TJVideo1B").attr("src")+"[EOL]",-1!=srcA.indexOf("zone_id=6[EOL]")&&$j("#videoPageAds .TJVideo1A").attr("src",srcA.replace("zone_id=6[EOL]","zone_id=9522")),-1!=srcB.indexOf("zone_id=7[EOL]")&&$j("#videoPageAds .TJVideo1B").attr("src",srcB.replace("zone_id=7[EOL]","zone_id=9523"))),$j("#suggestTranslationInput").keyup(function(){var e=$j(this);if($j("#titleErrorGif").hide(),!1===validateBannedWords(e.val(),$bannedWordsList))return alert(VIDEO_SHOW.bannedPhrase),e.val(""),!1}),$j("#shareToStream").submit(function(e){e.preventDefault(),shareToStream($j(this).serialize()).done(function(e){e.status})}),function(){var e=$j("body"),t=$j(".player-html5"),s=$j(".streamQuality");function i(e){var a=e.parent(),t=e;$j(".quality.dropdownTrigger").find("span").text(t.text()),a.siblings().removeClass("active"),a.addClass("active")}function o(){try{localStorage.enableStorage=1,localStorage.removeItem("enableStorage")}catch(e){return}return 1}function l(e,a){t.find("source").attr("src",e),"Explorer"!==BrowserDetect.browser&&t.load(),a.siblings().removeClass("active"),a.addClass("active")}function a(e){var a=$j("#"+e);s.removeClass("active"),a.length?(a.addClass("active"),i($j(".streamQuality.active")),t.find("source").attr("src",$j(".streamQuality.active").data("quality"))):(null===e&&!a.length||null!==e&&!a.length)&&(i($j(".streamQuality.default")),t.find("source").attr("src",$j(".streamQuality.default").data("quality")))}e.on("click",".js-playTrigger",function(e){e.preventDefault(),t.show(),t[0].play(),$j("#placeHolderWrap").addClass("active")}),e.on("click",".streamQuality",function(e){e.stopImmediatePropagation();var a,t,s=$j(this);s.data("upgrade")||(i(s),o()?(l((t=$j(e.target)).data().quality,t),localStorage.setItem("activeVideoQuality",t.attr("id"))):(l((a=$j(e.target)).data().quality,a),$j.cookie("activeVideoQuality",a.attr("id")))),$j(".toggleQuality").removeClass("expanded").find("ul").hide()}),e.on("click","#js-qualityTrigger",function(e){e.stopPropagation(),$j(this).closest(".toggleQuality").toggleClass("expanded").end().next("ul").toggle()}),e.on("click",function(){$j(".toggleQuality").removeClass("expanded").find("ul").hide()}),o()?a(localStorage.getItem("activeVideoQuality")):a($j.cookie("activeVideoQuality"))}(),function(){var i=document.getElementById("aprilFoolsModal");i&&MG_Utils.storage.hasLocalStorage&&!localStorage.getItem("aprilFoolsModal")&&((i=new MG_Modal({content:i,closeButton:!1,className:"aprilFoolsContainer",closeDocument:!1})).openModal(function(){localStorage.setItem("aprilFoolsModal",!0)}),MG_Utils.addEventHandler(document,"click",function(e){var a,t,s;MG_Utils.hasClass(MG_Utils.getEventTarget(e),"js-exitModal")||MG_Utils.hasClass(MG_Utils.getEventTarget(e),"js-foolsTargetClose")?i.closeModal():(MG_Utils.hasClass(MG_Utils.getEventTarget(e),"js-foolsButton")||MG_Utils.hasClass(MG_Utils.getEventTarget(e),"containerMTubes"))&&(t=(a=document.getElementById("modalWrapMTubes")).querySelector(".foolsBottomModal"),s=a.querySelector(".foolsTopModal"),MG_Utils.addClass(a,"js-foolsTargetClose"),MG_Utils.removeClass(t,"displayNone"),MG_Utils.addClass(s,"displayNone"))}))}(),function(){var a,t;VIDEO_SHOW.isQrCode&&(new QRCode(document.getElementById("qrCode"),{width:130,height:130,correctLevel:0}).makeCode(VIDEO_SHOW.qrCode),a=document.querySelector(".qrOverlayBlock"),t=document.querySelector(".qrOverlayContent"),document.querySelector(".syncToyButton").addEventListener("click",function(){MHP1138.players[VIDEO_SHOW.videoId].isPlaying()&&MHP1138.players[VIDEO_SHOW.videoId].pause();MG_Utils.addClass(a,"qrShow"),MG_Utils.addClass(t,"qrShow"),VIDEO_SHOW.feelIsUserConnected||(MG_Utils.ajaxCall({url:VIDEO_SHOW.feelCacheUrl,type:"POST"}),$feel.init(feelSubToken,feelAppsToken,feelsAppsUserId),$feel.subs.load(mgPerformanceTimingSettings.videoId,0,feelsAppsUserId).then(function(){VIDEO_SHOW.feelIsUserConnected=!0}).catch(function(e){console.log("Error loading subtitles: ",e)}))}),t.addEventListener("click",function(e){if(!MG_Utils.hasClass(e.target,"js-qrClose"))return;MG_Utils.removeClass(a,"qrShow"),MG_Utils.removeClass(t,"qrShow")}))}(),VIDEO_SHOW.loggedOut&&CollectRecommended.set(VIDEO_SHOW.trackVideoId),MG_Utils.domReady(function(){function e(){MG_Utils.removeClass(i,"active"),setTimeout(function(){MG_Utils.removeClass(t,"hideBtn")},410)}var a,t,s,i;document.querySelector(".js-videoOverlayContent")&&(a=document.querySelector(".js-videoOverlayContent"),t=a.querySelector(".videoOverlayBtn"),s=a.querySelector(".closeOverlay"),i=a.querySelector(".videoOverlay"),setTimeout(function(){e()},2e3),MG_Utils.addEventHandler(t,"click",function(){MG_Utils.addClass(i,"active"),MG_Utils.addClass(this,"hideBtn")}),MG_Utils.addEventHandler(s,"click",function(){e()}));var o,l,n,d,r,c,u,g,p=document.querySelectorAll(".js-subItem"),v=document.querySelector(".js-streamSpan"),j=document.querySelector(".js-stream-tab"),m=[document.querySelector(".js-playlist-tab"),j],h=document.querySelector(".js-cancelBtn"),y=document.querySelector(".js-shareOutcome");function b(e,a,t){e.style.color=a,e.innerText=t}function f(e,a,t){"add"===e?MG_Utils.hasClass(a,t)||MG_Utils.addClass(a,t):MG_Utils.hasClass(a,t)&&MG_Utils.removeClass(a,t)}p&&[].forEach.call(p,function(t){MG_Utils.addEventHandler(t,"click",function(e){[].forEach.call(p,function(e){MG_Utils.removeClass(e,"active")}),[].forEach.call(m,function(e){MG_Utils.removeClass(e,"active")});var a=document.querySelector(".js-"+e.target.dataset.tab);a&&(MG_Utils.addClass(a,"active"),MG_Utils.addClass(t,"active"))})}),h&&MG_Utils.addEventHandler(h,"click",function(){j&&v&&(MG_Utils.removeClass(j,"active"),MG_Utils.removeClass(v,"active")),y&&f("remove",y,"active")}),document.querySelector(".js-share")&&(o=document.querySelector(".js-share"),l=document.querySelector(".js-submitToStream"),MG_Utils.addEventHandler(o,"click",function(){var a=document.querySelector(".js-share");MG_Utils.addClass(a,"disabledShareBtn"),a.disabled=!0,$j.ajax({url:VIDEO_SHOW.shareToStreamUrl,data:{profile:VIDEO_SHOW.trackUserId,table:"stream_posts_videos",attachment:VIDEO_SHOW.trackVideoId,caption:l.value,token:VIDEO_SHOW.token},type:"POST",success:function(e){y&&f("add",y,"active"),e&&e.status&&"pass"===e.status.toLowerCase()?(l.value="",b(y,"#339503",VIDEO_SHOW.streamSubmit.successText)):(b(y,"#e53b1a",VIDEO_SHOW.streamSubmit.errorText),MG_Utils.addClass(y,"errorMessage"),MG_Utils.removeClass(a,"disabledShareBtn"),a.disabled=!1)}})})),document.querySelector(".js-volumeControls")&&(n=document.querySelector("#js-player video"),d=document.querySelector(".js-volumeControls"),r=d.querySelector(".videoVolumeText"),c=d.querySelector(".videoVolumeIcon"),u=n&&n.canPlayType&&""==n.canPlayType('video/webm; codecs="vp8, vorbis"'),MG_Utils.addEventHandler(d,"click",function(){var e;MG_Utils.toggleClass(c,"videoMute"),(e=n).muted?(e.muted=!1,r.innerHTML=VIDEO_SHOW.muteVideo):(e.muted=!0,r.innerHTML=VIDEO_SHOW.unmuteVideo)}),(u&&d||!((g=n).mozHasAudio||Boolean(g.webkitAudioDecodedByteCount)||Boolean(g.audioTracks&&g.audioTracks.length)||!d||MG_Utils.hasClass(n,"mp4Video")))&&(d.style.display="none"));var $=document.querySelector(".logoLocked");$&&MG_Utils.addEventHandler($,"click",function(e){"img"===e.target.tagName.toLowerCase()&&triggerGatewayModal(event,void 0,VIDEO_SHOW.vkey)});var C,S=document.querySelector("#js-shareData .tab-menu-wrapper-row"),O=S?S.querySelectorAll(".tab-menu-wrapper-cell"):"";O&&O.length<=2&&[].forEach.call(O,function(e,a){"string"!=typeof e.style.grid&&(e.style.display="inline-block",e.style.width="25%")}),VIDEO_SHOW.loggedOut&&(C=PH_Storage.getItem("watchedVideoStorage")?PH_Storage.getItem("watchedVideoStorage"):[],VIDEO_SHOW.trackVideoId&&-1==C.indexOf(VIDEO_SHOW.trackVideoId)&&(C.push(VIDEO_SHOW.trackVideoId),PH_Storage.saveItem("watchedVideoStorage",C)));var k=document.querySelector(".fanclub-info-pop");k&&(null==getCookieAdvanced("fanClubInfoPop")&&setTimeout(function(){MG_Utils.addClass(k,"active")},5e3),MG_Utils.addEventHandler(k.querySelector(".fanclub-info-btn"),"click",function(){MG_Utils.removeClass(k,"active"),MG_Utils.setCookie("fanClubInfoPop",1,"/",14)})),document.cookie="dynamicPremiumSection=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"});