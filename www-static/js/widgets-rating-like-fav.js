!function(){var e,t,a,r=LocalStorageManager.getInstance();r.get("videoRated")&&(e=JSON.parse(decodeURIComponent(r.get("videoRated")))),e&&e[WIDGET_RATINGS_LIKE_FAV.itemId]&&((WIDGET_RATINGS_LIKE_FAV.saleVideo&&WIDGET_RATINGS_LIKE_FAV.canVote&&!WIDGET_RATINGS_LIKE_FAV.isPremium||!WIDGET_RATINGS_LIKE_FAV.saleVideo||WIDGET_RATINGS_LIKE_FAV.isPremium)&&(s({value:(a=(a=e[WIDGET_RATINGS_LIKE_FAV.itemId]).split("|"))[0],current:a[1]}.value),function(){var e,t=parseInt($j(".votes-count-container").find(".votesUp").text()),a=parseInt($j(".votes-count-container").find(".votesDown").text());e=0==t?0:parseInt(t/(t+a)*100);$j(".votes-count-container").find(".percent").text(e+"%"),$j(".rating-bar-container").find(".bar-thumbs-up").width(parseInt(e)+"%"),$j(".rating-bar-container").find(".bar-thumbs-down").width(100-parseInt(e)+"%")}()),(t=document.getElementById("main-container"))&&MG_Utils.addClass(t,"videoVoted"));var o="undefined"!=WIDGET_RATINGS_LIKE_FAV.canDownVoteBlocker&&!1===WIDGET_RATINGS_LIKE_FAV.canDownVoteBlocker;function n(e){var t,a,o=$j(e);o.hasClass("active")||(t=o.hasClass("js-voteUp")?1:0,$j(document).trigger("customVotePercent",t),s(t),$j.ajax({url:WIDGET_RATINGS_LIKE_FAV.voteUrl+"&current="+(t?WIDGET_RATINGS_LIKE_FAV.currentUp:WIDGET_RATINGS_LIKE_FAV.currentDown)+"&value="+t,type:"POST",success:function(e){e&&r.push("videoRated",e)}}),VIDEO_SHOW.isPremium&&(a=1==t?"Like":"Dislike",videoEvent.Vote=a,"undefined"!=typeof mixpanel&&mixpanel.track("Video Vote",videoEvent)))}function s(e){e=parseInt(e);var t,a,o=[$j(".votesDown"),$j(".votesUp")],r=[$j(".js-voteDown"),$j(".js-voteUp")];o[e]&&(r[e].addClass("active"),t=parseInt(document.querySelector(".votes-count-container .votesDown").innerHTML),a=document.querySelectorAll(".rating-bar-container .rating-bar")[1],0<t&&a&&(MG_Utils.hasClass(a,"bar-no-votes")&&MG_Utils.removeClass(a,"bar-no-votes"),MG_Utils.hasClass(a,"bar-thumbs-down")||MG_Utils.addClass(a,"bar-thumbs-down")),r[e?0:1].removeClass("active"))}$j(".js-voteUp"+(o?"":", .js-voteDown")).on("click",function(){!WIDGET_RATINGS_LIKE_FAV.saleVideo||WIDGET_RATINGS_LIKE_FAV.canVote?n(this):videoPurchaseFlow.triggerPurchaseFlow()})}();var WIDGET_RATINGS_LIKE_FAV=void 0!==WIDGET_RATINGS_LIKE_FAV?WIDGET_RATINGS_LIKE_FAV:{},isFavourite=WIDGET_RATINGS_LIKE_FAV.isFavourite;head.ready(document,function(){WIDGET_RATINGS_LIKE_FAV.loggedIn&&!WIDGET_RATINGS_LIKE_FAV.deleted?(isFavourite&&$j(".votes-fav-wrap .favorite-wrapper").addClass("active"),$j(".votes-fav-wrap .favorite-wrapper").on("click",function(){ga("send","event",WIDGET_RATINGS_LIKE_FAV.controllerUc+" Page","click","Favorite"),$j.ajax({type:"POST",url:WIDGET_RATINGS_LIKE_FAV.favouriteUrl,data:{id:WIDGET_RATINGS_LIKE_FAV.itemIdNum,token:WIDGET_RATINGS_LIKE_FAV.token,toggle:isFavourite?"0":"1"},beforeSend:function(){$j(".votes-fav-wrap .favorite-wrapper i").hide(),$j(".votes-fav-wrap .favorite-wrapper").append('<img class="favSpinner" src="'+WIDGET_RATINGS_LIKE_FAV.spinnerUrl+'" />')},success:function(e){$j(".favSpinner").remove(),$j(".votes-fav-wrap .favorite-wrapper i").show(),e&&(isFavourite="remove"==e.action?1:0,"false"==e.success?(yesNoModal.show(e.message),$j(".noBtn").addClass("hidden"),$j(".modal-title").html("Warning")):1==isFavourite?($j(".votes-fav-wrap .favorite-wrapper").addClass("active"),$j(".votes-fav-wrap .favorite-wrapper").data("title","Already in Favorites")):($j(".votes-fav-wrap .favorite-wrapper").removeClass("active"),$j(".votes-fav-wrap .favorite-wrapper").data("title","Add to Favorites")))}})})):WIDGET_RATINGS_LIKE_FAV.loggedIn||$j(".votes-fav-wrap .favorite-wrapper").on("click",function(){signinbox.show(textPHTranslation.loginTitleVideo)})}),MG_Utils.domReady(function(){var e,t=document.querySelector(".js-voteDown"),a=document.querySelector(".votesDown");t&&a&&MG_Utils.hasClass(t,"active")&&0===parseInt(a.innerHTML)&&(a.innerHTML=1,(e=document.querySelectorAll(".rating-bar")[1])&&MG_Utils.hasClass(e,"bar-no-votes")&&(MG_Utils.removeClass(e,"bar-no-votes"),MG_Utils.addClass(e,"bar-thumbs-down")))});