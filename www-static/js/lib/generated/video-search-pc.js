function removeCat(){var e=window.location.href.replace(/#.*$/,""),t=e.split("?")[0],r=[],a=-1!==e.indexOf("?")?e.split("?")[1]:"",l=encodeURI(e);if(1!=(-1<l.indexOf("%")?1:0)||"Other"!=BrowserDetect.browser&&"Explorer"!=BrowserDetect.browser){if(""!==a){for(var i=(r=a.split("&")).length-1;0<=i;--i)"filter_category"===r[i].split("=")[0]&&r.splice(i,1);var o=(t=t+"?"+r.join("&")).indexOf("#"),t=t.substring(0,-1!=o?o:t.length)}return t}return l.split("%")[0]}head.ready(document,function(){function l(e){var t=e.target,r=-1<t.parentNode.classList.value.indexOf("excludedCategory"),a=window.location.href.replace(/#.*$/,""),l=t.parentNode.dataset.id,i=-1<window.location.href.indexOf("exclude")?/exclude_category=((\d+\-?)+)/.exec(a)[1]:"",o=0<i.length?i.split("-"):"",c=r?1<o.length?o.filter(function(e){return e!==l}):[]:o.concat(l),n=0<c.length?-1<o.indexOf(l)?1<c.length?c.join("-"):c[0]:0<i.length?i+"-"+l:l:"",a=""!=n?-1<a.indexOf("exclude_category")?a.replace("exclude_category="+i,"exclude_category="+n):a+"&exclude_category="+n:i!=l?a.replace(/&exclude_category=\d+/,""):a.replace("&exclude_category="+i,"");window.location=a}jsLoaded="yes","undefined"==typeof searchCategories||""==searchCategories?$j("#filterResults").hide():(setTimeout(function(){$j("#filterResults").show(),function(){var e=window.location.href.replace(/#.*$/,""),t=-1<window.location.href.indexOf("exclude")?/exclude_category=((\d+\-?)+)/.exec(e)[1]:"",r=0<t.length?t.split("-"):"";if(0<r.length){for(var a=document.querySelectorAll(".categoryLink"),l=0;l<a.length;l++)MG_Utils.removeClass(a[l],"excludedCategory");for(l=0;l<r.length;l++)MG_Utils.addClass(document.querySelector('.categoryLink[data-id="'+r[l]+'"]'),"excludedCategory"),document.querySelector('.categoryLink[data-id="'+r[l]+'"] .hideCategoryToggle').textContent="Show",document.querySelector('.categoryLink[data-id="'+r[l]+'"] .hideCategoryToggle').dataset.title="Show category"}}(),function(){for(var e=document.querySelectorAll(".excludedCategory"),t=0;t<e.length;t++){var r=e[t].dataset.id,a=-1<window.location.href.indexOf("exclude")?/exclude_category=((\d+\-?)+)/.exec(e[t].href)[1]:"",l=a.split("-").filter(function(e){return e!==r}),i=1<l.length?l.join("-"):null!=l[0]?l[0]:"";""!=i?e[t].setAttribute("href",e[t].href.replace("exclude_category="+a,"exclude_category="+i)):e[t].setAttribute("href",e[t].href.replace("&exclude_category="+a,""))}}();for(var e=document.querySelectorAll(".tooltipTrig"),t=0;t<e.length;t++)initTooltip(e[t],e[t].getAttribute("data-title"))},100),$j.each(searchCategories,function(e,t){var r;"undefined"==typeof categoryTranslations||null!=(r=categoryTranslations[t.title])&&""!=r&&(t.title=r),72==t.id&&(t.title="DP");var a=$j('<li><a href="" class="categoryLink" data-id="'+t.id+'"><span class="categoryTitle">'+t.title+'</span> <span class="categoryCount">'+t.count.toLocaleString()+'</span><span class="hideCategoryToggle tooltipTrig" data-title="Hide category">Hide</span></a></li>').appendTo($j(".subSearchFilter.category"));0==t.id&&a.children("a").addClass("selected")}),$j.urlParam=function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},$j(".showCategory li a").each(function(e){var t=$j(this).attr("data-id"),r=$j(this),a=window.location.href.replace(/#.*$/,""),l={};-1==a.indexOf("filter_category")?(l[e]=(/\?/.test(a)?"&":"?")+"filter_category="+t,checkIfPageNumber=a.replace(/&page=\d*/g,""),r.attr("href",checkIfPageNumber+l[e])):(l[e]=a.replace(/filter_category=(.+?)(&|$.*)/,"filter_category="+t+"$2"),checkIfPageNumberFilter=l[e].replace(/&page=\d*/g,""),r.attr("href",checkIfPageNumberFilter),r.removeClass("selected"),t==$j.urlParam("filter_category")&&(r.addClass("selected"),r.find(".hideCategoryToggle").remove()))}),$j(".showlength li a").each(function(e){var t=$j(this).attr("data-length"),r=$j(this),a=window.location.href.replace(/#.*$/,""),l={};-1==a.indexOf("filter_duration")?(l[e]=(/\?/.test(a)?"&":"?")+"filter_duration="+t,checkIfPageNumber=a.replace(/&page=\d*/g,""),r.attr("href",checkIfPageNumber+l[e])):(l[e]=a.replace(/filter_duration=(.+?)(&|$.*)/,"filter_duration="+t+"$2"),checkIfPageNumberFilter=l[e].replace(/&page=\d*/g,""),r.attr("href",checkIfPageNumberFilter),r.removeClass("selected"),t==$j.urlParam("filter_duration")&&r.addClass("selected"))})),$j(".showSubMenu").click(function(){var e=$j(this).attr("data-show");$j("."+e).toggle(),$j("."+e).parent(".slimScrollDiv").toggle(),$j("#scrollbar_sidebar").is(":visible")&&"showCategory"==e||$j("."+e).next("div").toggle()}),$j('<li><a href="'+removeCat()+'" data-id="">All</a></li>').prependTo($j(".subSearchFilter.category")),-1==window.location.href.indexOf("filter_category")&&$j(".subSearchFilter.category").find("li:first-child a").addClass("selected"),$j(".hideCategoryToggle").on("click",function(e){e.stopImmediatePropagation(),e.preventDefault();var t,r=window.location.href.replace(/#.*$/,""),a=-1<window.location.href.indexOf("exclude")?/exclude_category=((\d+\-?)+)/.exec(r)[1]:"";if((0<a.length?a.split("-"):"").length+1<=10)l(e);else{if(!MG_Utils.hasClass(MG_Utils.closest(this,".categoryLink"),"excludedCategory"))return"undefined"!=typeof VIDEO_BROWSE?t=VIDEO_BROWSE.limit:"undefined"!=typeof VIDEO_INCATEGORIES?t=VIDEO_INCATEGORIES.limit:"undefined"!=typeof VIDEO_SEARCH&&(t=VIDEO_SEARCH.limit),alert(t),!1;l(e)}})});
VIDEO_SEARCH.getParam&&$j("#categoryFilterList").hide(),head.ready(document,function(){!VIDEO_SEARCH.filterSet||"mv"!=orderBy&&"tr"!=orderBy||dropdown.init(".subFilter");9<$j(".subSearchFilter.category li").size()&&$j("#scrollbar_sidebar").slimScroll({height:"360px",color:"#F39000",size:"7px",alwaysVisible:!0,railVisible:!0,railOpacity:1,railColor:"#222",distance:0,opacity:1,railClass:"track3",barClass:"handle3"}),""==VIDEO_SEARCH.jsLoaded&&$j("#filterResults").hide(),$j(".relatedItem").on("click",function(t){var e=$j(this).data("related-url");e&&(t.preventDefault(),$j.ajax({type:"GET",context:this,url:e,complete:function(){var t=$j(this).attr("href");window.location.href=t}}))})}),function(){var n=["0","10","20","30","40+"],o=$j("#duration-slider");o.slider({range:!0,min:0,max:n.length-1,values:[minDuration,maxDuration],slide:function(t,e){if(e.values[0]+1>e.values[1])return!1},stop:function(t,e){var i=window.location.href;if(e.values[0]==e.values[1])return!1;i=l(i,"min_duration"),i=l(i,"max_duration"),"0"==n[e.values[0]]||(i=r(i,"min_duration",n[e.values[0]])),"40+"!=n[e.values[1]]&&(i=r(i,"max_duration",n[e.values[1]])),window.location.replace(i)}});var a=100/(n.length-1);function r(t,e,i){var n=-1<t.indexOf("?")?"&":"?";return t+n+e+"="+i}function l(t,e){var i=t.split("?");if(2<=i.length){for(var n=encodeURIComponent(e)+"=",o=i[1].split(/[&;]/g),a=o.length;0<a--;)-1!==o[a].lastIndexOf(n,0)&&o.splice(a,1);return t=o.join("&")?i[0]+"?"+o.join("&"):i[0]}return t}$j.each(n,function(t,e){var i=0!==t&&t!==n.length-1?a:a/2;o.next(".legend").append("<label style='width: "+i+"%'>"+e+"</laben>")}),$j(document).on({mouseenter:function(){$this=$j(this),$j("#tooltip").html("<div class='tooltip-sub'>Drag to set filter</div></div><div class='arrow-down'></div>").show().addClass($this.attr("type")),$j("#tooltip").position({my:"center bottom-10",at:"center top",collision:"fit none",of:$this}),$j(".arrow-down").position({my:"center bottom",at:"center top",collision:"none none",of:$this})},mouseleave:function(){$j("#tooltip").hide()}},".ui-slider-handle")}();
function getAllElementIds(t,e){var s=t.data("id");return e.push(s),e}function setIdleTimeout(t,e,s){var a=0;function i(){a=setTimeout(n,t),$j(document).on("mousemove keypress",c)}function n(){a=0,e()}function c(){a?clearTimeout(a):s(),$j(document).off("mousemove keypress",c),setTimeout(i,1e3)}$j(i)}$j(document).ready(function(){var t=[],e=$j(".streamateContent li .streamateBlock"),s=[];"undefined"!=typeof VIDEO_SEARCH&&VIDEO_SEARCH.checkIfObjExists&&(e.each(function(){s=getAllElementIds($j(this),t)}),setIdleTimeout(3e4,function(){return!1},function(){$j.ajax({type:"POST",url:"/live/ajax_update_streamate_status",data:{streamateIds:s},success:function(t){obj=t,obj.success&&e.each(function(){var t=$j(this),e=t.find(".bar").attr("class").split(" ")[2],s=t.find(".circle").attr("class").split(" ")[1];$j.each(obj.streamates,function(){this.id==t.data("id")&&(t.find("img").attr("src",this.picture_url),t.find(".bar").removeClass(e).addClass(this.bar),t.find(".circle").removeClass(s).addClass(this.circle),t.find(".getLabel").html(this.label))})})}})}))});